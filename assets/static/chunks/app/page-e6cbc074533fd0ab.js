(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{2139:(e,t,s)=>{Promise.resolve().then(s.bind(s,2425))},2425:(e,t,s)=>{"use strict";s.d(t,{MainView:()=>f});var a=s(7437),l=s(2265),r=s(5302);let n=e=>{let{time:t}=e;return(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("span",{className:"text-6xl font-black text-gray-700",children:[t.hour,":",t.minute,":",t.second]}),(0,a.jsx)("span",{className:"ml-1 font-bold",children:"WST"})]})},c=e=>{let{time:t}=e,s=(0,l.useRef)(null),r=(e,t)=>e%t/t*360+180;return(0,l.useEffect)(()=>{if(!s.current)return;let e=6e4*new Date().getTimezoneOffset(),a=r(t.unix-e,432e5),l=r(t.unix,36e5),n=r(t.unix,6e4);s.current.style.setProperty("--degHour","".concat(a,"deg")),s.current.style.setProperty("--degMin","".concat(l,"deg")),s.current.style.setProperty("--degSec","".concat(n,"deg"))},[t]),(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsxs)("div",{ref:s,className:"relative w-64 h-64 rounded-full border-4 border-gray-800 bg-white",children:[[...Array(12)].map((e,t)=>{let s=(t+1)*30*Math.PI/180,l=100*Math.sin(s),r=-(100*Math.cos(s));return(0,a.jsx)("div",{className:"absolute font-bold text-lg transform -translate-x-1/2 -translate-y-1/2",style:{left:"calc(50% + ".concat(l,"px)"),top:"calc(50% + ".concat(r,"px)")},children:t+1},t)}),(0,a.jsxs)("div",{className:"absolute inset-0",children:[(0,a.jsx)("div",{className:"absolute left-1/2 top-1/2 will-change-transform -translate-x-1/2 origin-top w-1.5 h-16 bg-black",style:{transform:"rotate(var(--degHour))"}}),(0,a.jsx)("div",{className:"absolute left-1/2 top-1/2 will-change-transform -translate-x-1/2 origin-top w-1 h-20 bg-black",style:{transform:"rotate(var(--degMin))"}}),(0,a.jsx)("div",{className:"absolute left-1/2 top-1/2 will-change-transform -translate-x-1/2 origin-top w-0.5 h-24 bg-red-500",style:{transform:"rotate(var(--degSec))"}}),(0,a.jsx)("div",{className:"absolute top-1/2 left-1/2 w-3 h-3 rounded-full bg-black will-change-transform -translate-x-1/2 -translate-y-1/2 z-10"}),(0,a.jsx)("span",{className:"absolute left-1/2 font-bold origin-center will-change-transform -translate-x-1/2",style:{top:"60%"},children:"WST"})]})]})})},i=e=>(0,a.jsx)("div",{className:"w-full max-w-2xl mx-auto",children:(0,a.jsxs)(r.mQ,{defaultValue:"tab1",className:"w-full",children:[(0,a.jsxs)(r.dr,{className:"grid w-full grid-cols-2",children:[(0,a.jsx)(r.SP,{value:"tab1",className:"text-l font-bold py-1 text-gray-700 data-[state=inactive]:text-gray-300 data-[state=active]:border-b-2 data-[state=active]:border-blue-400",children:"デジタル"}),(0,a.jsx)(r.SP,{value:"tab2",className:"text-l font-bold py-1 text-gray-700 data-[state=inactive]:text-gray-300 data-[state=active]:border-b-2 data-[state=active]:border-blue-400",children:"アナログ"})]}),(0,a.jsx)(r.nU,{value:"tab1",className:"mt-6",children:(0,a.jsx)("div",{className:"space-y-4",children:(0,a.jsx)(n,{time:e.wstClock.wstTime})})}),(0,a.jsx)(r.nU,{value:"tab2",className:"mt-6",children:(0,a.jsx)(c,{time:e.wstClock.wstTime})})]})});var o=s(8651);let d=e=>{let{isSettingsOpen:t,setIsSettingsOpen:s}=e;return(0,a.jsxs)("header",{className:"bg-blue-400 py-2 px-3 flex justify-between",children:[(0,a.jsx)("span",{className:"text-xl text-white font-bold",children:"WST Clock"}),t?(0,a.jsx)("button",{onClick:()=>s(!1),children:(0,a.jsx)("span",{className:"text-xl text-white font-bold px-1",children:"X"})}):(0,a.jsx)("button",{onClick:()=>s(!0),children:(0,a.jsx)(o.Z,{color:"white"})})]})},m=e=>{let{timeMillisecond:t,setTimeMillisecond:s}=e,l=Math.floor(t/36e5),r=Math.floor(t%36e5/6e4),n=(e,t)=>{s(36e5*e+6e4*t)},c=e=>{let t=l+e;t>23&&(t=0),t<0&&(t=23),n(t,r)},i=e=>{let t=r+e;t>59&&(t=0),t<0&&(t=59),n(l,t)},o=e=>{let t=parseInt(e);!isNaN(t)&&t>=0&&t<=23&&n(t,r)},d=e=>{let t=parseInt(e);!isNaN(t)&&t>=0&&t<=59&&n(l,t)};return(0,a.jsx)("div",{className:"my-2",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsxs)("div",{className:"flex flex-col items-center gap-1",children:[(0,a.jsx)("button",{className:"w-8 h-8 bg-blue-400 text-gray-100 rounded-full hover:bg-blue-600 transition-colors flex items-center justify-center",onClick:()=>c(1),children:"▲"}),(0,a.jsx)("input",{type:"text",value:l.toString().padStart(2,"0"),onChange:e=>o(e.target.value),className:"w-12 text-center border rounded-md py-1 focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,a.jsx)("button",{className:"w-8 h-8 bg-blue-400 text-gray-100 rounded-full hover:bg-blue-600 transition-colors flex items-center justify-center",onClick:()=>c(-1),children:"▼"})]}),(0,a.jsx)("span",{className:"text-xl font-bold",children:":"}),(0,a.jsxs)("div",{className:"flex flex-col items-center gap-1",children:[(0,a.jsx)("button",{className:"w-8 h-8 bg-blue-400 text-gray-100 rounded-full hover:bg-blue-600 transition-colors flex items-center justify-center",onClick:()=>i(1),children:"▲"}),(0,a.jsx)("input",{type:"text",value:r.toString().padStart(2,"0"),onChange:e=>d(e.target.value),className:"w-12 text-center border rounded-md py-1 focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,a.jsx)("button",{className:"w-8 h-8 bg-blue-400 text-gray-100 rounded-full hover:bg-blue-600 transition-colors flex items-center justify-center",onClick:()=>i(-1),children:"▼"})]})]})})},x=e=>(0,a.jsxs)("div",{className:"p-2",children:[(0,a.jsxs)("div",{className:"flex flex-col md:flex-row items-center justify-center space-y-4 md:space-y-0 md:space-x-4",children:[(0,a.jsxs)("div",{className:"max-w-fit grid grid-cols-2 items-center",children:[(0,a.jsx)("div",{className:"w-38",children:(0,a.jsx)("p",{className:"text-center",children:"起床時間の予定"})}),(0,a.jsx)("div",{className:"w-32",children:(0,a.jsx)(m,{timeMillisecond:e.wstClock.wakeUpTime,setTimeMillisecond:e.wstClock.handleChangeWakeUpTime})})]}),(0,a.jsxs)("div",{className:"max-w-fit grid grid-cols-2 items-center",children:[(0,a.jsx)("div",{children:(0,a.jsxs)("p",{className:"text-center",children:["起床ボタン",(0,a.jsx)("br",{}),"リセット時間"]})}),(0,a.jsx)("div",{className:"w-32",children:(0,a.jsx)(m,{timeMillisecond:e.wstClock.resetTime,setTimeMillisecond:e.wstClock.handleChangeResetTime})})]})]}),(0,a.jsxs)("div",{className:"flex flex-col md:flex-row items-center justify-center space-y-4 md:space-y-0 md:space-x-4 mt-2",children:[(0,a.jsx)("button",{className:"bg-blue-400 hover:bg-blue-500 text-white font-bold py-2 px-6 rounded-lg text-lg shadow-md w-64",onClick:e.wstClock.wakeUp,children:"起床"}),(0,a.jsx)("button",{className:"bg-blue-400 hover:bg-blue-500 text-white font-bold py-2 px-6 rounded-lg text-lg shadow-md w-64",onClick:e.wstClock.save,children:"保存"})]})]}),u=()=>{let[e,t]=(0,l.useState)(new Date),s=(0,l.useMemo)(()=>1e3/60,[]);return(0,l.useEffect)(()=>{let a=setInterval(()=>{let s=new Date;e.getSeconds()!==s.getSeconds()&&t(s)},s);return()=>clearInterval(a)},[e,s]),(0,l.useMemo)(()=>({unix:e.getTime(),hour:e.getHours().toString(),minute:e.getMinutes().toString().padStart(2,"0"),second:e.getSeconds().toString().padStart(2,"0")}),[e])},g=(e,t)=>{let s=(0,l.useCallback)(()=>{try{let s=window.localStorage.getItem(e);return s?JSON.parse(s):t}catch(s){return console.warn('Error reading localStorage key "'.concat(e,'":'),s),t}},[t,e]),[a,r]=(0,l.useState)(s),n=(0,l.useCallback)(t=>{try{let s=t instanceof Function?t(a):t;window.localStorage.setItem(e,JSON.stringify(s)),r(s),window.dispatchEvent(new StorageEvent("storage",{key:e,newValue:JSON.stringify(s),storageArea:localStorage}))}catch(t){console.warn('Error setting localStorage key "'.concat(e,'":'),t)}},[e,a]);return{storedValue:a,setValue:n,removeValue:(0,l.useCallback)(()=>{try{window.localStorage.removeItem(e),r(t),window.dispatchEvent(new StorageEvent("storage",{key:e,newValue:null,storageArea:localStorage}))}catch(t){console.warn('Error removing localStorage key "'.concat(e,'":'),t)}},[e,t])}},h=()=>{let e=u().unix,t=g("wstDates",{wakeUpTime:216e5,realWakeUpTime:216e5,resetTime:144e5,nextResetTime:0}),[s,a]=(0,l.useState)(()=>t.storedValue),r=new Date(e-(s.realWakeUpTime-6e4*new Date().getTimezoneOffset())%864e5+s.wakeUpTime),n=(0,l.useCallback)(e=>{let t=e.getMonth()+1,s=e.getDate(),a=["日","月","火","水","木","金","土"][e.getDay()];return"".concat(t,"月").concat(s,"日（").concat(a,"）")},[]),c={hour:r.getHours().toString(),minute:r.getMinutes().toString().padStart(2,"0"),second:r.getSeconds().toString().padStart(2,"0"),unix:r.getTime(),date:n(r),year:r.getFullYear(),reiwa:r.getFullYear()-2018},i=(0,l.useCallback)(e=>{a({...s,wakeUpTime:e})},[a,s]),o=(0,l.useCallback)(()=>{let e=Date.now(),l=m(e),r={...s,realWakeUpTime:e,nextResetTime:l};a(r),t.setValue(r)},[a,s,t]),d=(0,l.useCallback)(e=>{a({...s,resetTime:e})},[a,s]),m=(0,l.useCallback)(e=>{let t=new Date,a=6e4*t.getTimezoneOffset(),l=t.getTime()+a,r=l-l%864e5+a;return r+s.resetTime<e?r+864e5+s.resetTime:r+s.resetTime},[s]);return{wstTime:c,handleChangeWakeUpTime:i,wakeUp:o,handleChangeResetTime:d,wakeUpTime:s.wakeUpTime,resetTime:s.resetTime,isReseted:(()=>{let e=s.nextResetTime;return 0!==s.realWakeUpTime&&0!==s.nextResetTime&&new Date().getTime()<e})(),save:()=>{s.nextResetTime=m(s.realWakeUpTime),t.setValue(s)}}},w=e=>{let{text:t}=e;return(0,l.useEffect)(()=>{let e=document.createElement("script");return e.src="https://platform.x.com/widgets.js",e.async=!0,document.body.appendChild(e),()=>{document.body.removeChild(e)}},[]),(0,a.jsx)("a",{href:"https://twitter.com/share?ref_src=twsrc%5Etfw&text=".concat(encodeURIComponent(t)),className:"twitter-share-button","data-show-count":"false",children:"Post"})},f=()=>{let[e,t]=(0,l.useState)(!1),s=h(),r="私は今，".concat(s.wstTime.hour,"時").concat(s.wstTime.minute,"分").concat(s.wstTime.second,"秒（WST標準時）で生きています．");return(0,a.jsxs)("div",{children:[(0,a.jsx)(d,{isSettingsOpen:e,setIsSettingsOpen:t}),(0,a.jsx)("main",{children:e?(0,a.jsx)(x,{wstClock:s}):(0,a.jsxs)("div",{children:[(0,a.jsx)(i,{wstClock:s}),(0,a.jsxs)("div",{className:"mx-2",children:[(0,a.jsxs)("div",{className:"flex justify-center gap-3 items-center my-4",children:[(0,a.jsxs)("div",{className:"flex flex-col w-fit pl-2",children:[(0,a.jsxs)("span",{className:"text-gray-700 text-sm font-bold whitespace-nowrap",children:["令和",s.wstTime.reiwa,"年"]}),(0,a.jsxs)("span",{className:"text-gray-700 text-sm font-bold whitespace-nowrap",children:[s.wstTime.year,"年"]})]}),(0,a.jsx)("span",{className:"text-gray-700 font-bold",style:{fontSize:"2.3rem"},children:s.wstTime.date})]}),!s.isReseted&&(0,a.jsxs)("button",{className:"w-full bg-blue-400 hover:bg-blue-500 text-white font-bold py-2 px-6 rounded-lg text-2xl shadow-md w-64 tracking-widest",onClick:s.wakeUp,children:[(0,a.jsx)("span",{className:"pr-8",children:"起"}),(0,a.jsx)("span",{className:"pl-8",children:"床"})]}),(0,a.jsx)("div",{className:"flex justify-end my-3",children:(0,a.jsx)(w,{text:r})})]})]})})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[389,130,215,744],()=>t(2139)),_N_E=e.O()}]);